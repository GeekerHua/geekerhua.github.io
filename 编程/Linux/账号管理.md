
# 基础概念
* UID
* GID
* 有效群组
* 支持群组

## /etc/passwd
> 用户账号

root:x:0:0:root:/root:/bin/bash
账户名:密码:UID:GID:说明:home目录:默认shell

其中UID范围，0为系统管理员，1-999为系统账号(1-200系统建立，201-999使用者建立),1000-60000可登入账号

## /etc/shadow
> 用户密码

root:$6$wtbCCce/PxMeE5wm$KE2IfSJr.YLP7Rcai6oa/T7KFhO...:16559:0:99999:7:::
账号名:密码:最近变动密码的日期:密码不可被变动天数:密码需要重设天数:密码重设期限前警告天数:密码过期好账号宽限时间:账号失效日期:保留

## /etc/group
> 群组信息

root:x:0:
群组名称:群组密码:GID:群组支持的账号名称

## 有效群组
$ groups  会显示多个群组名，其中第一个就是有效群组。

切换有效群组：使用newgrp可以开启新的shell并使用新的有效群组。使用exit退出。

## 初始群组
/etc/passwd第四栏的GID即为初始群组，通常和用户名相同

# 账号管理
## useradd
选项 | 说明
---- | ----
-u | 后面接的是UID ，是一组数字。直接指定一个特定的UID 给这个帐号；
-g | 后面接的那个群组名称就是我们上面提到的initial group 啦～。该群组的GID  被放置到/etc/passwd 的第四个栏位内。
-G | 后面接的群组名称则是这个帐号还可以加入的群组。这个选项与参数会修改 etc/group 内的相关资料喔！
-M | 强制！不要建立使用者家目录！(系统帐号预设值)
-m | 强制！要建立使用者家目录！(一般帐号预设值)
-c | 这个就是/etc/passwd 的第五栏的说明内容啦～可以随便我们设定的啦～
-d | 指定某个目录成为家目录，而不要使用预设值。务必使用绝对路径！
-r | 建立一个系统的帐号，这个帐号的UID 会有限制(参考/etc/login.defs)
-s | 后面接一个shell ，若没有指定则预设是/bin/bash 的啦～
-e | 后面接一个日期，格式为『YYYY-MM-DD』此项目可写入shadow 第八栏位，亦即帐号失效日的设定项目啰
-f | 后面接shadow 的第七栏位项目，指定密码是否会失效。0为立刻失效，-1 为永远不失效(密码只会过期而强制于登入时重新设定而已。)

默认预设值，执行useradd默认做的动作
* 在/etc/passwd 里面建立一行与帐号相关的资料，包括建立UID/GID/家目录等；
* 在/etc/shadow 里面将此帐号的密码相关参数填入，但是尚未有密码；
* 在/etc/group 里面加入一个与帐号名称一模一样的群组名称；
* 在/home 底下建立一个与帐号同名的目录作为使用者家目录，且权限为700

## passwd
参数 | 说明
---- | ----
--stdin | 可以透过来自前一个管线的资料，作为密码输入，对shell script 有帮助！
-l | 是Lock 的意思，会将/etc/shadow 第二栏最前面加上! 使密码失效；
-u ：与-l 相对，是Unlock 的意思！
-S | 列出密码相关参数，亦即shadow 档案内的大部分资讯。
-n | 后面接天数，shadow 的第4 栏位，多久不可修改密码天数
-x | 后面接天数，shadow 的第5 栏位，多久内必须要更动密码
-w | 后面接天数，shadow 的第6 栏位，密码过期前的警告天数
-i | 后面接天数，shadow 的第7 栏位，密码失效天数

## chage
> 更详细的密码参数显示及修改

参数 | 说明
---- | ----
-l | 列出该帐号的详细密码参数；
-d | 后面接日期，修改shadow 第三栏位(最近一次更改密码的日期)，格式YYYY-MM-DD
-E | 后面接日期，修改shadow 第八栏位(帐号失效日)，格式YYYY-MM-DD
-I | 后面接天数，修改shadow 第七栏位(密码失效日期)
-m | 后面接天数，修改shadow 第四栏位(密码最短保留天数)
-M | 后面接天数，修改shadow 第五栏位(密码多久需要进行变更)
-W | 后面接天数，修改shadow 第六栏位(密码过期前警告日期)

## usermod
> 账号相关资料微调

参数 | 说明
---- | ----
-c | 后面接帐号的说明，即/etc/passwd 第五栏的说明栏，可以加入一些帐号的说明。
-d | 后面接帐号的家目录，即修改/etc/passwd 的第六栏；
-e | 后面接日期，格式是YYYY-MM-DD 也就是在/etc/shadow 内的第八个栏位资料啦！
-f ：后面接天数，为shadow 的第七栏位。
-g | 后面接初始群组，修改/etc/passwd 的第四个栏位，亦即是GID 的栏位！
-G | 后面接次要群组，修改这个使用者能够支援的群组，修改的是/etc/group 啰～
-a | 与-G 合用，可『增加次要群组的支援』而非『设定』喔！
-l | 后面接帐号名称。亦即是修改帐号名称， /etc/passwd 的第一栏！
-s | 后面接Shell 的实际档案，例如/bin/bash 或/bin/csh 等等。
-u | 后面接UID 数字啦！即/etc/passwd 第三栏的资料；
-L | 暂时将使用者的密码冻结，让他无法登入。其实仅改/etc/shadow 的密码栏。
-U | 将/etc/shadow 密码栏的! 拿掉，解冻啦！

## groupadd
> 修改群组

参数 | 说明
---- | ----
-g | 后面接某个特定的GID ，用来直接给予某个GID ～
-r | 建立系统群组啦！与/etc/login.defs 内的GID_MIN 有关。

#su与sudo
## su
> su可以用来切换任意账户，但需要输入root的密码

su -  切换成root，并使用root的shell与环境
su   切换成root，但还是原来账户的环境
su -c  执行一次命令。

## sudo
> 可以执行root权限，但需要在/etc/sudoers内的用户才能执行sudo权限，输入的是用户自己密码。